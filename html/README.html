
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Ball &amp; Beam Demo</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-01-22"><meta name="DC.source" content="README.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Ball &amp; Beam Demo</h1><!--introduction--><p>The ball &amp; beam demo was created as a lecture and homework demonstration of basic modes of proportional and proportional-derivative control. It was originally written in 2001, and most recently tested in 2011 using a current version of Matlab. These notes describe basic concepts incorporated in the demo and possible homework exercises.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Operation</a></li><li><a href="#2">User Interaction</a></li><li><a href="#3">Plotting Simulation Data</a></li><li><a href="#4">Dynamics</a></li><li><a href="#5">Proportional Control</a></li><li><a href="#6">Proportional-Derivative Control</a></li></ul></div><h2>Operation<a name="1"></a></h2><p>The ballbeam.m file is a function that can be run with no arguments. To start the demo simply enter <tt>ballbeam</tt> at the Matlab command prompt.</p><pre class="codeinput">ballbeam
</pre><pre class="codeoutput">Warning: The EraseMode property is no longer supported and will error in a
future release. Use the ANIMATEDLINE function for animating lines and points
instead of EraseMode 'none'. Removing instances of EraseMode set to 'normal',
'xor', and 'background' has minimal impact. 
Warning: The EraseMode property is no longer supported and will error in a
future release. Use the ANIMATEDLINE function for animating lines and points
instead of EraseMode 'none'. Removing instances of EraseMode set to 'normal',
'xor', and 'background' has minimal impact. 
</pre><img vspace="5" hspace="5" src="README_01.png" alt=""> <h2>User Interaction<a name="2"></a></h2><p>The demo starts up in manual mode. The vertical slider moves the end of the beam up and down. The bottom slider adjusts the setpoint indicated by the red marker. Push the <tt>Run</tt> button to start the simulation. The ball will roll back and forth on the beam as you move the beam position up and down. The simulation is stopped by pushing the <tt>Stop</tt> button or when the ball rolls off either end of the beam. A summary of the simulation results is shown in the plot.</p><p><b>Exercise</b>: Move the setpoint to a new place, press <tt>Run</tt>, and manipulate the beam position to settle the ball over the new setpoint.</p><h2>Plotting Simulation Data<a name="3"></a></h2><p>Simulation data is stored in a file <tt>ballbeam.mat</tt> after each run. The data can be loaded and plotted as follows:</p><pre class="codeinput">load <span class="string">ballbeam</span>
clf
subplot(211);
plot(tdata,xdata,<span class="string">'b'</span>,tdata,xspdata,<span class="string">'r'</span>);
legend(<span class="string">'Ball Position'</span>,<span class="string">'Setpoint'</span>,<span class="string">'Location'</span>,<span class="string">'NW'</span>);
xlabel(<span class="string">'Time (Sec.)'</span>);
subplot(212);
plot(tdata,udata);
legend(<span class="string">'Beam Position'</span>,<span class="string">'Location'</span>,<span class="string">'NW'</span>);
xlabel(<span class="string">'Time (Sec.)'</span>);
</pre><img vspace="5" hspace="5" src="README_02.png" alt=""> <h2>Dynamics<a name="4"></a></h2><p>The position of the ball is governed by a second order differential equation of the form</p><p><img src="README_eq04752580163087572296.png" alt="$$ \frac{d^2x}{dt^2} = K_{beam} u$$"></p><p><b>Exercise</b>: Design and perform a simulation experiment to estimate the parameter <img src="README_eq17886729557495621887.png" alt="$K_{beam}$">.</p><h2>Proportional Control<a name="5"></a></h2><p>As the name suggests, under proportional control the beam position is set in proportion to the difference between the ball position and desired setpoint.</p><p><img src="README_eq10691953506652038339.png" alt="$$ u = K_p(x_{sp}-x) $$"></p><p>Under the <tt>Mode</tt> menu, select proportional control (P) and use the slider controls to adjust <img src="README_eq04301653670133881862.png" alt="$K_p$">. Adjust the setpoint, then push <tt>Run</tt>. You can adjust the setpoint and control gain during the course of a <tt>Run</tt>.</p><p><b>Exercise</b>: What type of behavior do you observe?  Substituting the the expression for the control action into the dynamical model leads to a second order differential equation.  What is the solution to that equation?</p><p><b>Exercise</b>: Use the results of the above exercise to estimate the value of <img src="README_eq17886729557495621887.png" alt="$K_{beam}$">.</p><h2>Proportional-Derivative Control<a name="6"></a></h2><p>Proportional control alone leads to an oscillatory response. Proportional-Derivative (PD) control adds additional damping through a derivative term in the control law</p><p><img src="README_eq07350553746040469073.png" alt="$$ u = K_p(x_{sp}-x) - K_p\tau_d\frac{dx}{dt} $$"></p><p>where <img src="README_eq12006769312914636580.png" alt="$\tau_d$"> is the derivative 'time-constant'. Under the <tt>Mode</tt> menu, select proportional-derivative control (PD) and adjust the parameters with the associated sliders.</p><p><b>Exercise</b>: Set <img src="README_eq13990247616967302715.png" alt="$K_p = 0.1$">. How large does <img src="README_eq12006769312914636580.png" alt="$\tau_d$"> need to be to completely suppress overshoot of the setpoint?</p><p><b>Exercise</b>: Explore the response of the controlled system to a step change in the setpoint. Would you prefer an underdamped, critcally damped, or overdamped control system? Explain.</p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Ball & Beam Demo
%
% The ball & beam demo was created as a lecture and homework demonstration
% of basic modes of proportional and proportional-derivative control. It
% was originally written in 2001, and most recently tested in 2011 using a current
% version of Matlab. These notes describe basic concepts incorporated in
% the demo and possible homework exercises.

%% Operation
%
% The ballbeam.m file is a function that can be run with no arguments. To
% start the demo simply enter |ballbeam| at the Matlab command prompt.

ballbeam

%% User Interaction
%
% The demo starts up in manual mode. The vertical slider moves the end of
% the beam up and down. The bottom slider adjusts the setpoint indicated by
% the red marker. Push the |Run| button to start the simulation. The ball
% will roll back and forth on the beam as you move the beam position up and
% down. The simulation is stopped by pushing the |Stop| button or when the
% ball rolls off either end of the beam. A summary of the simulation
% results is shown in the plot.
%
% *Exercise*: Move the setpoint to a new place, press |Run|,
% and manipulate the beam position to settle the ball over the new
% setpoint.

%% Plotting Simulation Data
%
% Simulation data is stored in a file |ballbeam.mat| after each run. The
% data can be loaded and plotted as follows:

load ballbeam
clf
subplot(211);
plot(tdata,xdata,'b',tdata,xspdata,'r');
legend('Ball Position','Setpoint','Location','NW');
xlabel('Time (Sec.)');
subplot(212);
plot(tdata,udata);
legend('Beam Position','Location','NW');
xlabel('Time (Sec.)');

%% Dynamics
%
% The position of the ball is governed by a second order differential
% equation of the form
%
% $$ \frac{d^2x}{dt^2} = K_{beam} u$$
% 
% *Exercise*: Design and perform a simulation experiment to
% estimate the parameter $K_{beam}$.

%% Proportional Control
%
% As the name suggests, under proportional control the beam position is set
% in proportion to the difference between the ball position and desired
% setpoint.
%
% $$ u = K_p(x_{sp}-x) $$
%
% Under the |Mode| menu, select proportional control (P) and use the slider
% controls to adjust $K_p$. Adjust the setpoint, then push |Run|. You can
% adjust the setpoint and control gain during the course of a |Run|.  
%
% *Exercise*: What type of behavior do you observe?  Substituting the the
% expression for the control action into the dynamical model leads to a
% second order differential equation.  What is the solution to that
% equation?
%
% *Exercise*: Use the results of the above exercise to estimate the value
% of $K_{beam}$.


%% Proportional-Derivative Control
%
% Proportional control alone leads to an oscillatory response.
% Proportional-Derivative (PD) control adds
% additional damping through a derivative term in the control law
%
% $$ u = K_p(x_{sp}-x) - K_p\tau_d\frac{dx}{dt} $$
%
% where $\tau_d$ is the derivative 'time-constant'. Under the |Mode| menu,
% select proportional-derivative control (PD) and adjust the parameters
% with the associated sliders. 
%
% *Exercise*: Set $K_p = 0.1$. How large does $\tau_d$ need to be to
% completely suppress overshoot of the setpoint?
%
% *Exercise*: Explore the response of the controlled system to a step
% change in the setpoint. Would you prefer an underdamped, critcally
% damped, or overdamped control system? Explain.
%

##### SOURCE END #####
--></body></html>